<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Oda Pap - Mombasa's leading B2B wholesale marketplace. Source quality products at wholesale prices from verified local suppliers. Electronics, fashion, kitchenware, beauty products and more. No minimum orders, fast delivery within Mombasa.">
  <meta name="keywords" content="wholesale Mombasa, bulk buying Mombasa, B2B marketplace Mombasa, wholesale electronics, wholesale fashion, reseller platform, supplier Mombasa, trade prices Mombasa">
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#ff5722">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Oda Pap">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="msapplication-TileColor" content="#ff5722">
  <meta name="msapplication-tap-highlight" content="no">
  <!-- Favicons and Manifest -->
  <link rel="icon" type="image/x-icon" href="favicon_io/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
  <title>Oda Pap - Wholesale Marketplace Mombasa</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="css/dynamicSearch.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    /* Critical skeleton styles - show immediately before JS loads */
    .skeleton{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:skeletonShimmer 1.5s infinite;border-radius:8px}
    @keyframes skeletonShimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
    .skeleton-card{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.05);margin-bottom:16px}
    .skeleton-card .skeleton-image{width:100%;aspect-ratio:1;background:linear-gradient(90deg,#f5f5f5 25%,#eee 50%,#f5f5f5 75%);background-size:200% 100%;animation:skeletonShimmer 1.5s infinite}
    .skeleton-card .skeleton-content{padding:12px}
    .skeleton-card .skeleton-line{height:14px;margin-bottom:8px;border-radius:4px}
    .skeleton-card .skeleton-line.short{width:60%}
    .skeleton-card .skeleton-line.medium{width:80%}
    .skeleton-card .skeleton-line.full{width:100%}
    .img-placeholder{background:#f5f5f5;display:flex;align-items:center;justify-content:center;color:#ddd;font-size:24px;min-height:150px}
    .img-placeholder::before{content:'\f03e';font-family:'Font Awesome 5 Free';font-weight:900}
  </style>
  <script src="./js/firebase.js" type="module"></script>
  <script src="index.js" type="module"></script>
  <!-- Hidden SEO Content -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Oda Pap",
    "description": "Oda Pap is Mombasa's premier B2B wholesale marketplace connecting retailers, resellers and businesses with verified local suppliers offering quality products at wholesale prices. Browse thousands of products across categories including electronics, mobile phones, fashion, beauty, kitchenware, furniture and more. We facilitate bulk purchasing with no minimum order requirements, secure payment options, and reliable delivery services within Mombasa. Whether you're a shop owner, market trader, or online reseller, Oda Pap helps you source inventory at competitive trade prices to maximize your profit margins. Currently serving Mombasa area only.",
    "url": "https://odapap.com"
  }
  </script>
</head>
<body>
  <!-- Header with Smart Collapse -->
  <header id="mainHeader" class="header-full">
    <!-- Compact Header (shown when scrolled) -->
    <div class="compact-header" id="compactHeader">
      <img src="images/logo.png" alt="Oda Pap" class="compact-logo" onclick="location.href='index.html'">
      <div class="compact-search">
        <input type="text" placeholder="Search..." id="compactSearchInput">
        <i class="fas fa-search"></i>
      </div>
      <div class="compact-actions">
        <button onclick="location.href='cart.html'"><i class="fas fa-shopping-cart"></i><span id="cart-count-compact" class="compact-badge"></span></button>
        <button onclick="location.href='notification.html'"><i class="fas fa-bell"></i><span id="notif-count-compact" class="compact-badge"></span></button>
        <button onclick="toggleMegaMenu()"><i class="fas fa-th"></i></button>
      </div>
    </div>

    <!-- Full Header -->
    <div class="full-header" id="fullHeader">
      <div class="top-bar">
        <div class="logo-container" onclick="location.href='index.html'">
          <img src="images/logo.png" alt="Oda Pap Logo" class="logo">
          <span class="logo-text">Oda Pap</span>
        </div>
        <div class="search-container">
          <form id="searchForm">
            <input type="text" id="searchInput" placeholder="Search products...">
            <button type="submit"><i class="fas fa-search"></i></button>
          </form>
        </div>
        <div class="top-icons">
          <div class="menu-icon" onclick="toggleMegaMenu()">
            <i class="fas fa-th-large"></i>
            <p>Menu</p>
          </div>
        </div>
      </div>
      <div class="border-line"></div>
      <nav class="nav-bar">
        <button class="home-button active" onclick="location.href='index.html'"><i class="fas fa-home"></i></button>
        <button class="home-button" onclick="location.href='notification.html'"><i class="fas fa-bell"></i><span id="notification-count" class="nav-counter"></span></button>
        <button class="home-button" onclick="location.href='cart.html'"><i class="fas fa-shopping-cart"></i><span id="cart-count" class="nav-counter"></span></button>
        <button class="home-button" onclick="location.href='wishlist.html'"><i class="fas fa-heart"></i><span id="wishlist-count" class="nav-counter"></span></button>
        <button class="home-button" onclick="location.href='profile.html'"><i class="fas fa-user-circle"></i></button>
      </nav>
    </div>
  </header>

  <!-- Mega Menu Overlay -->
  <div class="mega-menu-overlay" id="megaMenuOverlay" onclick="closeMegaMenu()"></div>
  <div class="mega-menu" id="megaMenu">
    <div class="mega-menu-header">
      <h3><i class="fas fa-th-large"></i> Quick Menu</h3>
      <button class="close-mega" onclick="closeMegaMenu()"><i class="fas fa-times"></i></button>
    </div>
    
    <!-- User Quick Info -->
    <div class="mega-user-section" id="megaUserSection">
      <div class="mega-user-info">
        <img src="images/profile-placeholder.png" alt="Profile" id="megaUserPic">
        <div>
          <p class="mega-user-name" id="megaUserName">Welcome!</p>
          <p class="mega-user-status" id="megaUserStatus">Login to access all features</p>
        </div>
      </div>
      <div class="mega-quick-stats" id="megaQuickStats" style="display:none;">
        <div class="quick-stat" onclick="location.href='cart.html'">
          <i class="fas fa-shopping-cart"></i>
          <span id="megaCartCount">0</span>
          <small>Cart</small>
        </div>
        <div class="quick-stat" onclick="location.href='wishlist.html'">
          <i class="fas fa-heart"></i>
          <span id="megaWishlistCount">0</span>
          <small>Wishlist</small>
        </div>
        <div class="quick-stat" onclick="location.href='notification.html'">
          <i class="fas fa-bell"></i>
          <span id="megaNotifCount">0</span>
          <small>Alerts</small>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="mega-actions">
      <a href="listing.html" class="mega-action sell"><i class="fas fa-plus-circle"></i> Sell Item</a>
      <a href="seller-dashboard.html" class="mega-action"><i class="fas fa-store"></i> Seller Hub</a>
      <a href="notification.html" class="mega-action"><i class="fas fa-comments"></i> Messages</a>
      <a href="profile.html" class="mega-action"><i class="fas fa-user-cog"></i> My Account</a>
    </div>

    <!-- Categories Grid -->
    <div class="mega-categories">
      <h4>Browse Categories</h4>
      <div class="mega-cat-grid" id="megaCatGrid">
        <!-- Categories loaded dynamically from Firestore -->
      </div>
    </div>

    <!-- Help Links -->
    <div class="mega-footer">
      <a href="customer_care.html"><i class="fas fa-headset"></i> Help Center</a>
      <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
  </div>

  <main>
    <!-- Compact Hero + Quick Links -->
    <section class="hero-compact" id="heroCarousel">
      <div class="hero-mini-carousel" id="carouselTrack">
        <!-- Slides loaded dynamically from Firestore -->
      </div>
      <div class="carousel-dots" id="carouselDots"></div>
    </section>

    <!-- Auth Status -->
    <div id="auth-status" class="auth-bar"></div>

    <!-- Prime Categories Pills -->
    <section class="prime-pills">
      <a href="category.html?prime=generalShop" class="prime-pill general"><i class="fas fa-store"></i> General</a>
      <a href="category.html?prime=featured" class="prime-pill featured"><i class="fas fa-star"></i> Featured</a>
      <a href="category.html?prime=bestseller" class="prime-pill bestseller"><i class="fas fa-fire"></i> Hot</a>
      <a href="category.html?prime=offers" class="prime-pill offers"><i class="fas fa-percent"></i> Deals</a>
    </section>

    <!-- Featured: General Shop (Curated) -->
    <section class="featured-section" id="featuredSection">
      <div class="featured-header">
        <div class="featured-title">
          <i class="fas fa-star"></i>
          <h2>General Shop</h2>
          <span class="featured-badge">Curated</span>
        </div>
        <a href="category.html?prime=generalShop" class="see-all">See All <i class="fas fa-chevron-right"></i></a>
      </div>
      <div class="featured-scroll" id="featuredItems">
        <!-- Featured items loaded dynamically -->
      </div>
    </section>

    <!-- Categories Strip -->
    <section class="cat-section">
      <div class="section-head">
        <h2>Shop by Category</h2>
      </div>
      <div class="cat-strip" id="categoryStrip"></div>
    </section>

    <!-- Products Grid -->
    <section class="gallery">
      <div class="filter-bar">
        <h2>All Products</h2>
        <select id="sortSelect" class="sort-select">
          <option value="for-you">âœ¨ For You</option>
          <option value="profit">Best Margin</option>
          <option value="popular">Most Popular</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="newest">Newest</option>
        </select>
      </div>
      <div class="listings-container" id="listings-container">
        <!-- Initial skeleton placeholders for instant visual feedback -->
        <div class="skeleton-card"><div class="skeleton-image skeleton"></div><div class="skeleton-content"><div class="skeleton-line full skeleton"></div><div class="skeleton-line medium skeleton"></div><div class="skeleton-line short skeleton"></div></div></div>
        <div class="skeleton-card"><div class="skeleton-image skeleton"></div><div class="skeleton-content"><div class="skeleton-line full skeleton"></div><div class="skeleton-line medium skeleton"></div><div class="skeleton-line short skeleton"></div></div></div>
        <div class="skeleton-card"><div class="skeleton-image skeleton"></div><div class="skeleton-content"><div class="skeleton-line full skeleton"></div><div class="skeleton-line medium skeleton"></div><div class="skeleton-line short skeleton"></div></div></div>
        <div class="skeleton-card"><div class="skeleton-image skeleton"></div><div class="skeleton-content"><div class="skeleton-line full skeleton"></div><div class="skeleton-line medium skeleton"></div><div class="skeleton-line short skeleton"></div></div></div>
      </div>
    </section>
  </main>

  <!-- Sell Button -->
  <footer>
    <button class="floating-button" onclick="location.href='listing.html'">
      <i class="fas fa-plus"></i>
    </button>
    <p>&copy; 2024 Oda Pap Wholesale. All Rights Reserved.</p>
  </footer>

  <script>
    // Mega Menu Toggle
    function toggleMegaMenu() {
      const menu = document.getElementById('megaMenu');
      const overlay = document.getElementById('megaMenuOverlay');
      menu.classList.toggle('open');
      overlay.classList.toggle('open');
      document.body.style.overflow = menu.classList.contains('open') ? 'hidden' : '';
    }
    
    function closeMegaMenu() {
      document.getElementById('megaMenu').classList.remove('open');
      document.getElementById('megaMenuOverlay').classList.remove('open');
      document.body.style.overflow = '';
    }

    // Smart Header Collapse
    let lastScroll = 0;
    let scrollThreshold = 100;
    let ticking = false;
    
    function updateHeader() {
      const header = document.getElementById('mainHeader');
      const currentScroll = window.pageYOffset;
      
      if (currentScroll > scrollThreshold) {
        if (!header.classList.contains('header-compact')) {
          header.classList.add('header-compact');
          header.classList.remove('header-full');
        }
      } else {
        if (header.classList.contains('header-compact')) {
          header.classList.remove('header-compact');
          header.classList.add('header-full');
        }
      }
      
      // Hide header when scrolling down fast, show when scrolling up
      if (currentScroll > lastScroll && currentScroll > 200) {
        header.classList.add('header-hidden');
      } else {
        header.classList.remove('header-hidden');
      }
      
      lastScroll = currentScroll;
      ticking = false;
    }
    
    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateHeader);
        ticking = true;
      }
    });

    // Compact search sync
    document.getElementById('compactSearchInput')?.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        window.location.href = `search-results.html?q=${encodeURIComponent(this.value)}`;
      }
    });
  </script>
</body>
</html>
