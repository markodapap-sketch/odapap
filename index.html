<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/jpeg" href="images/logo.jpg">
    <link rel="apple-touch-icon" href="images/logo.jpg">
    <title>Oda Pap</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <script src="./js/firebase.js" type="module"></script>
    <script src="index.js" type="module"></script>
    <div id="loading-overlay">
      <div class="loader">
          <div class="loader-content">
              <img 
                  src="./assets/animations/loader.gif" 
                  alt="Loading..." 
                  class="loader-gif"
                  onerror="this.style.display='none';this.nextElementSibling.style.display='block'"
              >
              <div class="fallback-loader">
                  <div class="spinner"></div>
              </div>
              <p>Loading...</p>
          </div>
      </div>
  </div>
    
  </head>

  <body>
    <header>
      <div class="top-bar">
        <div class="logo-container">
          <img src="images/logo.jpg" alt="Oda Pap Logo" class="logo" />
          <span class="logo-text">Oda Pap</span>
        </div>

        <div class="search-container">
          <form id="searchForm">
            <input type="text" id="searchInput" placeholder="Search..." />
            <button type="submit"><i class="fas fa-search"></i></button>
          </form>
          <div id="searchSuggestions" class="suggestions">
            <!-- Suggestions will be dynamically populated here -->
          </div>
        </div>

        <div class="top-icons">
          <div class="menu-icon" onclick="toggleMenu()">
            <i class="fas fa-bars"></i>
            <p>Menu</p>
          </div>
          <div class="dropdown-content" id="dropdown">
            <!-- Categories loaded dynamically from categoryData.js -->
          </div>

          <script>
            // Category icons mapping
            const categoryMenuIcons = {
              'student-centre': 'graduation-cap', 'electronics': 'tv', 'kitchenware': 'blender',
              'furniture': 'couch', 'fashion': 'tshirt', 'beauty': 'heart', 'rentals': 'building',
              'service-men': 'tools', 'foodstuffs': 'carrot', 'phones': 'mobile-alt',
              'accessories': 'headphones', 'pharmaceutical': 'pills', 'kids': 'hat-wizard'
            };
            
            // Load categories dynamically
            function loadDropdownCategories() {
              const dropdown = document.getElementById('dropdown');
              const categories = [
                'student-centre', 'electronics', 'kitchenware', 'furniture', 'fashion',
                'beauty', 'rentals', 'service-men', 'foodstuffs', 'phones', 'accessories',
                'pharmaceutical', 'kids'
              ];
              const labels = {
                'student-centre': 'Student Centre', 'electronics': 'Electronics', 'kitchenware': 'Kitchenware',
                'furniture': 'Furniture', 'fashion': 'Fashion', 'beauty': 'Beauty', 'rentals': 'Rentals',
                'service-men': 'Service Men', 'foodstuffs': 'Foodstuffs', 'phones': 'Phones',
                'accessories': 'Accessories', 'pharmaceutical': 'Pharmaceutical', 'kids': 'Kids'
              };
              
              categories.forEach(cat => {
                const link = document.createElement('a');
                link.href = `category.html?category=${cat}`;
                link.className = 'category';
                link.innerHTML = `<i class="fas fa-${categoryMenuIcons[cat]}"></i><p>${labels[cat]}</p>`;
                dropdown.appendChild(link);
              });
            }
            
            loadDropdownCategories();
            
            function toggleMenu() {
              var dropdown = document.getElementById("dropdown");
              dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
            }

            window.onclick = function (event) {
              if (!event.target.matches(".menu-icon") && !event.target.matches(".menu-icon *")) {
                var dropdown = document.getElementById("dropdown");
                if (dropdown.style.display === "block") {
                  dropdown.style.display = "none";
                }
              }
            };
          </script>
        </div>
      </div>

      <div class="border-line"></div>
      <div class="nav-bar" id="nav-bar">
        <button class="home-button" onclick="location.href='index.html'">
          <i class="fas fa-home"></i>
          <p>HOME</p>
        </button>

        <button class="home-button" onclick="location.href='notification.html'" style="position: relative;">
          <i class="fas fa-bell" id="notification-icon"></i>
          <span class="cart-notification"></span>
          <p>CHAT</p>
        </button>
        <button class="home-button" onclick="location.href='cart.html'" style="position: relative;">
          <i class="fas fa-shopping-cart" id="cart-icon"></i>
          <span class="cart-notification"></span>
          <p>CART</p>
        </button>
        <button class="home-button" onclick="location.href='wishlist.html'" style="position: relative;">
          <i class="fas fa-heart" id="wishlist-icon"></i>
          <span class="cart-notification"></span>
          <p>WISHLIST</p>
        </button>
        <button class="home-button" onclick="location.href='profile.html'" style="position: relative;">
          <i class="fas fa-user-circle"></i>
          <span id="profile-notification" class="blinking-notification" style="display: none;"></span>
          <p>PROFILE</p>
        </button>
      </div>
    </header>

    <main>
      <!-- UPDATED: Scrollable Category Strip -->
      <section class="category-strip-section">
        <h2>Shop by Category</h2>
        <div class="category-strip-wrapper">
          <button class="scroll-btn scroll-left" onclick="scrollCategories(-1)">
            <i class="fas fa-chevron-left"></i>
          </button>
          <div class="category-strip" id="categoryStrip">
            <!-- Category cards will be dynamically inserted here -->
          </div>
          <button class="scroll-btn scroll-right" onclick="scrollCategories(1)">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </section>

      <div class="border-line"></div>

      <nav>
        <div id="auth-status" class="auth-status-bar">
          <!-- Auth status populated by JavaScript -->
        </div>
      </nav>

      <!-- Featured Products Section -->
      <section class="featured-products">
        <h2>Featured Products</h2>
        <div class="gallery listings-container" id="listings-container">
          <!-- Listings will be dynamically inserted here -->
        </div>
      </section>
    </main>
    
    <footer>
      <button class="floating-button" onclick="location.href='listing.html'">
        <i class="fas fa-plus"></i>
        <span class="button-text">Sell Now</span>
      </button>
      
      <p>&copy; 2024 Oda Pap. All Rights Reserved.</p>
      <div class="footer-content">
          <h3>Follow Us</h3>
          <ul class="socials">
              <li><a href="https://www.facebook.com/yourprofile" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
              <li><a href="https://www.twitter.com/yourprofile" target="_blank"><i class="fab fa-twitter"></i></a></li>
              <li><a href="https://www.instagram.com/yourprofile" target="_blank"><i class="fab fa-instagram"></i></a></li>
              <li><a href="https://www.linkedin.com/in/yourprofile" target="_blank"><i class="fab fa-linkedin-in"></i></a></li>
              <li><a href="https://www.pinterest.com/yourprofile" target="_blank"><i class="fab fa-pinterest"></i></a></li>
          </ul>
      </div>
    </footer>
  </body>
</html>